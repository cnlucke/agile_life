
<ul>
  <% @groups.each do |group| %>
    <li><%= link_to group.name, group %>
    <% if group.has_member?(current_user) %>
      <b>Member</b><form action="<%= group_path(group) %>" method="post">
        <input type="hidden" name="_method" value="PATCH">
        <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
        <input type="hidden" name="group_action" value="leave">
        <input type="submit" value="Leave Group">
      </form></li>

    <% else %>
    <form action="<%= group_path(group) %>" method="post">
      <input type="hidden" name="_method" value="PATCH">
      <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
      <input type="hidden" name="group_action" value="join">
      <input type="submit" value="Join Group">
    </form></li>
    <% end %>
  <% end %>
</ul>
<%= link_to "Back", user_path %>
